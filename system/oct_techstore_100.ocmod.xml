<?xml version="1.0" encoding="utf-8"?>
<modification>
  <code>oct_techstore_100</code>
  <name>Octemplates - TechStore Template 1.0.0</name>
  <version>1.0.0</version>
  <author>Octemplates</author>
  <file path="catalog/controller/product/manufacturer.php">
    <operation error="skip">
      <search><![CDATA['href' => $this->url->link('product/manufacturer/info', 'manufacturer_id=' . $result['manufacturer_id'])]]></search>
      <add position="before"><![CDATA[
        'image' => $this->model_tool_image->resize($result['image'], 150, 150),
      ]]></add>
    </operation>
     <operation error="skip">
      <search><![CDATA[public function index() {]]></search>
      <add position="after"><![CDATA[
        $oct_data = $this->config->get('oct_techstore_data');
        if (isset($oct_data['showmanlogos']) && $oct_data['showmanlogos'] == "on") {
          $data['show_logo'] = 1;
        } else {
          $data['show_logo'] = 0;
        }
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[public function info() { ]]></search>
      <add position="after"><![CDATA[
	    $this->load->language('octemplates/oct_techstore');
        $data['oct_home_text'] = $this->language->get('oct_home_text');
           ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/extension/module/bestseller.php">
    <operation error="skip">
      <search><![CDATA[public function index($setting) {]]></search>
      <add position="after"><![CDATA[static $module = 0;]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[return $this->load->view('extension/module/bestseller', $data);]]></search>
      <add position="before"><![CDATA[$data['module'] = $module++;]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        'saving'      => round((($result['price'] - $result['special'])/($result['price'] + 0.01))*100, 0),
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/extension/module/latest.php">
    <operation error="skip">
      <search><![CDATA[public function index($setting) {]]></search>
      <add position="after"><![CDATA[static $module = 0;]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[return $this->load->view('extension/module/latest', $data);]]></search>
      <add position="before"><![CDATA[$data['module'] = $module++;]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        'saving'      => round((($result['price'] - $result['special'])/($result['price'] + 0.01))*100, 0),
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/extension/module/special.php">
    <operation error="skip">
      <search><![CDATA[public function index($setting) {]]></search>
      <add position="after"><![CDATA[static $module = 0;]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[return $this->load->view('extension/module/special', $data);]]></search>
      <add position="before"><![CDATA[$data['module'] = $module++;]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        'saving'      => round((($result['price'] - $result['special'])/($result['price'] + 0.01))*100, 0),
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/extension/module/featured.php">
    <operation error="skip">
      <search><![CDATA[public function index($setting) {]]></search>
      <add position="after"><![CDATA[static $module = 0;]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[return $this->load->view('extension/module/featured', $data);]]></search>
      <add position="before"><![CDATA[$data['module'] = $module++;]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        'saving'      => round((($product_info['price'] - $product_info['special'])/($product_info['price'] + 0.01))*100, 0),
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/information/contact.php">
    <operation error="skip">
      <search><![CDATA[$data['heading_title'] = $this->language->get('heading_title');]]></search>
      <add position="after"><![CDATA[
        $this->load->language('octemplates/oct_techstore');
        $oct_data = $this->config->get('oct_techstore_data');
        $oct_techstore_cont_contact_html = $oct_data['cont_contacthtml'];
        if (isset($oct_techstore_cont_contact_html[$this->session->data['language']]) && !empty($oct_techstore_cont_contact_html[$this->session->data['language']])) {
          $data['oct_techstore_cont_contacthtml'] = html_entity_decode($oct_techstore_cont_contact_html[$this->session->data['language']], ENT_QUOTES, 'UTF-8');
        } else {
          $data['oct_techstore_cont_contacthtml'] = false;
        }
        if (isset($oct_data['cont_contactmap']) && !empty($oct_data['cont_contactmap'])) {
          $data['oct_techstore_cont_contactmap'] = html_entity_decode($oct_data['cont_contactmap'], ENT_QUOTES, 'UTF-8');
        } else {
          $data['oct_techstore_cont_contactmap'] = false;
        }
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[if (isset($this->error['name'])) {]]></search>
      <add position="before"><![CDATA[
        $oct_data = $this->config->get('oct_techstore_data');
        if (isset($oct_data['terms']) && $oct_data['terms']) {
          $this->load->model('catalog/information');
          $information_info = $this->model_catalog_information->getInformation($oct_data['terms']);
          if ($information_info) {
            $data['text_terms'] = sprintf($this->language->get('text_oct_terms'), $this->url->link('information/information', 'information_id=' . $oct_data['terms'], 'SSL'), $information_info['title'], $information_info['title']);
          } else {
            $data['text_terms'] = '';
          }
        } else {
          $data['text_terms'] = '';
        }
        if (isset($this->error['terms'])) {
          $data['error_terms'] = $this->error['terms'];
        } else {
          $data['error_terms'] = '';
        }
        if (isset($this->request->post['terms'])) {
          $data['terms'] = $this->request->post['terms'];
        } else {
          $data['terms'] = '';
        }
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[if (!preg_match($this->config->get('config_mail_regexp'), $this->request->post['email'])) {]]></search>
      <add position="before"><![CDATA[
        $oct_techstore_data = $this->config->get('oct_techstore_data');
        if (isset($oct_techstore_data['terms']) && $oct_techstore_data['terms']) {
          if (!isset($this->request->post['terms'])) {
            $this->load->model('catalog/information');
            $information_info = $this->model_catalog_information->getInformation($oct_techstore_data['terms']);
            $this->error['terms'] = sprintf($this->language->get('error_oct_terms'), $information_info['title']);
          }
        }
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/account/account.php">
    <operation error="skip">
      <search><![CDATA[$data['text_recurring'] = $this->language->get('text_recurring');]]></search>
      <add position="after"><![CDATA[
      $this->load->language('octemplates/oct_techstore');
      $data['oct_text_logout'] = $this->language->get('oct_text_logout');
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/account/voucher.php">
    <operation error="skip">
      <search><![CDATA[if (isset($this->error['amount'])) {]]></search>
      <add position="before"><![CDATA[
        $oct_data = $this->config->get('oct_techstore_data');
        if (isset($oct_data['terms']) && $oct_data['terms']) {
          $this->load->model('catalog/information');
          $information_info = $this->model_catalog_information->getInformation($oct_data['terms']);
          if ($information_info) {
            $data['text_terms'] = sprintf($this->language->get('text_oct_terms'), $this->url->link('information/information', 'information_id=' . $oct_data['terms'], 'SSL'), $information_info['title'], $information_info['title']);
          } else {
            $data['text_terms'] = '';
          }
        } else {
          $data['text_terms'] = '';
        }
        if (isset($this->error['terms'])) {
          $data['error_terms'] = $this->error['terms'];
        } else {
          $data['error_terms'] = '';
        }
        if (isset($this->request->post['terms'])) {
          $data['terms'] = $this->request->post['terms'];
        } else {
          $data['terms'] = '';
        }
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[if (!isset($this->request->post['agree'])) {]]></search>
      <add position="before"><![CDATA[
        $oct_techstore_data = $this->config->get('oct_techstore_data');
        if (isset($oct_techstore_data['terms']) && $oct_techstore_data['terms']) {
          if (!isset($this->request->post['terms'])) {
            $this->load->model('catalog/information');
            $information_info = $this->model_catalog_information->getInformation($oct_techstore_data['terms']);
            $this->error['terms'] = sprintf($this->language->get('error_oct_terms'), $information_info['title']);
          }
        }
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/common/header.php">
    <operation error="skip">
      <search><![CDATA[$data['telephone'] = $this->config->get('config_telephone');]]></search>
      <add position="after"><![CDATA[
      $this->load->language('octemplates/oct_techstore');
      $data['oct_techstore_news'] = $this->language->get('oct_techstore_news');
      $data['oct_techstore_contact'] = $this->language->get('oct_techstore_contact');
      $data['oct_techstore_clock'] = $this->language->get('oct_techstore_clock');
      $data['oct_techstore_client_center'] = $this->language->get('oct_techstore_client_center');
      $data['oct_techstore_see_more'] = $this->language->get('oct_techstore_see_more');
      $data['oct_techstore_mmenu'] = $this->language->get('oct_techstore_mmenu');
      $data['oct_techstore_minfo'] = $this->language->get('oct_techstore_minfo');
      $data['oct_techstore_msearch'] = $this->language->get('oct_techstore_msearch');
      $data['oct_techstore_msearchb'] = $this->language->get('oct_techstore_msearchb');
      $data['oct_techstore_data'] = $oct_data = $this->config->get('oct_techstore_data');
      $data['oct_techstore_status'] = $this->config->get('oct_techstore_status');
      $data['link_cart'] = $this->url->link('checkout/cart');
      $data['link_wishlist'] = $this->url->link('account/wishlist', '', true);
      $data['link_compare'] = $this->url->link('product/compare');
      $data['link_login'] = $this->url->link('account/login', '', true);
      if ($oct_data['enable_minify'] == 'on') {
        $this->oct_minify_css();
        $this->oct_minify_js();
      }
      $data['text_news'] = $this->language->get('oct_techstore_news');
      $data['text_contact'] = $this->language->get('oct_techstore_contact');
      $data['text_clock'] = $this->language->get('oct_techstore_clock');
      $data['text_client_center'] = $this->language->get('oct_techstore_client_center');
      $data['text_see_more'] = $this->language->get('oct_techstore_see_more');
      $data['oct_techstore_news'] = $this->url->link('octemplates/blog_articles');
      // Вывод ссылок на статьи
      $data['oct_techstore_header_information_links'] = array();
      $this->load->model('catalog/information');
      if (isset($oct_data['header_information_links'])) {
        foreach ($this->model_catalog_information->getInformations() as $result) {
          if (in_array($result['information_id'], $oct_data['header_information_links'])) {
            $data['oct_techstore_header_information_links'][] = array(
              'title' => $result['title'],
              'href' => $this->url->link('information/information', 'information_id=' . $result['information_id'])
            );
          }
        }
      }
      // Свой CSS и Javascript код
      $data['oct_techstore_customcss'] = html_entity_decode($oct_data['customcss'], ENT_QUOTES, 'UTF-8');
      $data['oct_techstore_customjavascrip'] = html_entity_decode($oct_data['customjavascrip'], ENT_QUOTES, 'UTF-8');
      $oct_techstore_cont_clock = $oct_data['cont_clock'];
      if (isset($oct_techstore_cont_clock[$this->session->data['language']]) && !empty($oct_techstore_cont_clock[$this->session->data['language']])) {
        $data['oct_techstore_cont_clock'] = array_values(array_filter(explode(PHP_EOL, $oct_techstore_cont_clock[$this->session->data['language']])));
      } else {
        $data['oct_techstore_cont_clock'] = false;
      }
      if (isset($oct_data['cont_phones']) && !empty($oct_data['cont_phones'])) {
        $data['oct_techstore_cont_phones'] = array_values(array_filter(explode(PHP_EOL, $oct_data['cont_phones'])));
      } else {
        $data['oct_techstore_cont_phones'] = false;
      }
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[public function index() {]]></search>
      <add position="before"><![CDATA[
        public function oct_minify_css() {
          $oct_data = $this->config->get('oct_techstore_data');
          $files = array(
            'view/javascript/bootstrap/css/bootstrap.min.css',
            'view/theme/oct_techstore/stylesheet/flipclock.css',
            'view/theme/oct_techstore/stylesheet/stylesheet.css',
            'view/theme/oct_techstore/stylesheet/fonts.css',
            'view/theme/oct_techstore/stylesheet/autosearch.css',
            'view/theme/oct_techstore/stylesheet/popup.css',
            'view/theme/oct_techstore/stylesheet/responsive.css',
            'view/theme/oct_techstore/js/cloud-zoom/cloud-zoom.css',
            'view/javascript/jquery/magnific/magnific-popup.css',
            'view/javascript/jquery/datetimepicker/bootstrap-datetimepicker.min.css',
            'view/javascript/jquery/owl-carousel/owl.carousel.css',
            'view/theme/oct_techstore/js/fancy-box/jquery.fancybox.min.css',
            'view/javascript/octemplates/oct_product_filter/nouislider.css',
            'view/javascript/octemplates/tippy/tippy.css',
            'view/javascript/octemplates/tippy/tooltipster-sideTip-shadow.min.css',
            'view/theme/oct_techstore/stylesheet/dynamic_stylesheet.css',
            'view/theme/oct_techstore/js/toast/jquery.toast.css'
          );
          $file_compress = DIR_APPLICATION . 'view/theme/oct_techstore/stylesheet/stylesheet_minify.css';
          $cache_life = 3600;
          if ($files) {
            if (!file_exists($file_compress) or (time() - filemtime($file_compress) >= $cache_life)) {
              $buffer = "";
              foreach ($files as $file) {
                $buffer .= file_get_contents(DIR_APPLICATION . $file);
              }
              $buffer .= html_entity_decode($oct_data['customcss'], ENT_QUOTES, 'UTF-8');
              $buffer = preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*/!', '', $buffer);
              $buffer = str_replace(': ', ':', $buffer);
              $buffer = str_replace(array("\r\n", "\r", "\n", "\t"), '', $buffer);
              $buffer = str_replace(array('  ', '    ', '    '), ' ', $buffer);
              file_put_contents($file_compress, $buffer);
            }
          }
        }
        public function oct_minify_js() {
          $oct_data = $this->config->get('oct_techstore_data');
          $files = array(
            'view/javascript/jquery/jquery-2.1.1.min.js',
            'view/javascript/bootstrap/js/bootstrap.min.js',
            'view/javascript/jquery/owl-carousel/owl.carousel.min.js',
            'view/theme/oct_techstore/js/main.js',
            'view/theme/oct_techstore/js/common.js',
            'view/theme/oct_techstore/js/flexmenu.min.js',
            'view/theme/oct_techstore/js/flipclock.js',
            'view/theme/oct_techstore/js/barrating.js',
            'view/javascript/jquery/owl-carousel/owl.carousel.min.js',
            'view/theme/oct_techstore/js/input-mask.js',
            'view/theme/oct_techstore/js/fancy-box/jquery.fancybox.min.js',
            'view/theme/oct_techstore/js/cloud-zoom/cloud-zoom.1.0.2.js',
            'view/javascript/jquery/magnific/jquery.magnific-popup.min.js',
            'view/theme/oct_techstore/js/moment.js',
            'view/javascript/jquery/datetimepicker/locale/ru-ru.js',
            'view/javascript/jquery/datetimepicker/bootstrap-datetimepicker.min.js',
            'view/javascript/octemplates/oct_product_filter/nouislider.js',
            'view/javascript/octemplates/oct_product_filter/wNumb.js',
            'view/theme/oct_techstore/js/lazyload/jquery.lazyload.min.js',
            'view/javascript/octemplates/tippy/tippy.min.js',
            'view/theme/oct_techstore/js/toast/jquery.toast.js'
          );
          $file_compress = DIR_APPLICATION . 'view/theme/oct_techstore/js/javascript_minify.js';
          $cache_life = 3600;
          if ($files) {
            if (!file_exists($file_compress) or (time() - filemtime($file_compress) >= $cache_life)) {
              $buffer = "";
              foreach ($files as $file) {
                $buffer .= file_get_contents(DIR_APPLICATION . $file);
                $buffer .= "\r\n\r\n";
              }
             // $buffer .= html_entity_decode($oct_data['customjavascrip'], ENT_QUOTES, 'UTF-8');
              $buffer = preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*/!', '', $buffer);
              $buffer = str_replace(array("\r\n", "\r"), "\n", $buffer);
              $buffer = preg_replace('/[^\S\n]+/', ' ', $buffer);
              $buffer = str_replace(array(" \n", "\n "), "\n", $buffer);
              $buffer = preg_replace('/\n+/', "\n", $buffer);
              $buffer = str_replace(': ', ':', $buffer);
              $buffer = preg_replace(array('(( )+{)','({( )+)'), '{', $buffer);
              $buffer = preg_replace(array('(( )+})','(}( )+)','(;( )*})'), '}', $buffer);
              $buffer = preg_replace(array('(;( )+)','(( )+;)'), ';', $buffer);
              $buffer = str_replace(array(' {',' }','{ ','; '),array('{','}','{',';'), $buffer);
              file_put_contents($file_compress, $buffer);
            }
          }
        }
      ]]></add>
    </operation>
	<operation>
      <search><![CDATA[
        $data['text_checkout'] = $this->language->get('text_checkout');
      ]]></search>
      <add position="after"><![CDATA[
        $data['text_page'] = $this->language->get('text_page');
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/ru-ru/common/header.php" error="skip">
    <operation>
      <search><![CDATA[
		$_['text_search']        = 'Поиск';
      ]]></search>
      <add position="after"><![CDATA[
		$_['text_page']          = 'страница';
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/en-gb/common/header.php" error="skip">
    <operation>
      <search><![CDATA[
		$_['text_all']           = 'Show All';
      ]]></search>
      <add position="after"><![CDATA[
		$_['text_page']          = 'page';
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/common/footer.php">
    <operation error="skip">
      <search><![CDATA[$data['contact'] = $this->url->link('information/contact');]]></search>
      <add position="before"><![CDATA[
        $data['oct_techstore_data'] = $oct_data = $this->config->get('oct_techstore_data');
        $this->load->language('octemplates/oct_techstore');
        $data['oct_techstore_contact_us'] = $this->language->get('oct_techstore_contact_us');
        $data['oct_techstore_categories'] = $this->language->get('oct_techstore_categories');
        $data['oct_techstore_our_contacts'] = $this->language->get('oct_techstore_our_contacts');
        $data['oct_techstore_payments'] = $this->language->get('oct_techstore_payments');
        $data['oct_techstore_powered'] = $this->language->get('oct_techstore_powered');
        $data['text_contact_us'] = $this->language->get('oct_techstore_contact_us');
        $data['text_categories'] = $this->language->get('oct_techstore_categories');
        $data['text_our_contacts'] = $this->language->get('oct_techstore_our_contacts');
        $data['text_payments'] = $this->language->get('oct_techstore_payments');
        $data['oct_powered'] = sprintf($this->language->get('oct_techstore_powered'), $this->config->get('config_name'));
        // Вывод ссылок на статьи
        $data['oct_techstore_footer_informations'] = array();
        if (isset($oct_data['foot_info_links'])) {
          foreach ($this->model_catalog_information->getInformations() as $result) {
            if (in_array($result['information_id'], $oct_data['foot_info_links'])) {
              $data['oct_techstore_footer_informations'][] = array(
                'title' => $result['title'],
                'href' => $this->url->link('information/information', 'information_id=' . $result['information_id'])
              );
            }
          }
        }
        $this->load->model('catalog/category');
        $data['oct_techstore_footer_categories'] = array();
        if (isset($oct_data['foot_cat_links'])) {
          foreach ($oct_data['foot_cat_links'] as $category_id) {
            $category_info = $this->model_catalog_category->getCategory($category_id);
            if ($category_info) {
              $data['oct_techstore_footer_categories'][] = array(
                'name' => $category_info['name'],
                'href' => $this->url->link('product/category', 'path=' . $category_info['category_id'])
              );
            }
          }
        }
        $data['garanted_text'] = array();
        if (isset($oct_data['foot_garantedtext_show']) && $oct_data['foot_garantedtext_show'] == 'on' && isset($oct_data['foot_garantedtext']) && $oct_data['foot_garantedtext']) {
          foreach ($oct_data['foot_garantedtext'] as $key => $foot_garantedtext) {
            if ($foot_garantedtext['popup'] == 'on') {
              $foot_garantedtext_link = (isset($foot_garantedtext['description'][$this->session->data['language']])) ? str_replace('index.php?route=information/information&', 'index.php?route=information/information/agree&', $foot_garantedtext['description'][$this->session->data['language']]['link']) : '';
            } else {
              $foot_garantedtext_link = (isset($foot_garantedtext['description'][$this->session->data['language']])) ? $foot_garantedtext['description'][$this->session->data['language']]['link'] : '';
            }
            $data['garanted_text'][] = array(
              'id'    => $key,
              'icon'  => $foot_garantedtext['icon'],
              'popup' => $foot_garantedtext['popup'],
              'name'  => (isset($foot_garantedtext['description'][$this->session->data['language']])) ? $foot_garantedtext['description'][$this->session->data['language']]['name'] : '',
              'text'  => (isset($foot_garantedtext['description'][$this->session->data['language']])) ? $foot_garantedtext['description'][$this->session->data['language']]['text'] : '',
              'link'  => ($foot_garantedtext_link == "#" || empty($foot_garantedtext_link)) ? "javascript:void(0);" : $foot_garantedtext_link
            );
          }
        }
        $oct_techstore_cont_adress = $oct_data['cont_adress'];
        if (isset($oct_techstore_cont_adress[$this->session->data['language']]) && !empty($oct_techstore_cont_adress[$this->session->data['language']])) {
          $data['oct_techstore_cont_adress'] = html_entity_decode($oct_techstore_cont_adress[$this->session->data['language']], ENT_QUOTES, 'UTF-8');
        } else {
          $data['oct_techstore_cont_adress'] = false;
        }
        if (isset($oct_data['cont_phones']) && !empty($oct_data['cont_phones'])) {
          $data['oct_techstore_cont_phones'] = array_values(array_filter(explode(PHP_EOL, $oct_data['cont_phones'])));
        } else {
          $data['oct_techstore_cont_phones'] = false;
        }
        if (isset($oct_data['cont_email']) && !empty($oct_data['cont_email'])) {
          $data['oct_techstore_cont_email'] = html_entity_decode($oct_data['cont_email'], ENT_QUOTES, 'UTF-8');
        } else {
          $data['oct_techstore_cont_email'] = false;
        }
        if (isset($oct_data['cont_skype']) && !empty($oct_data['cont_skype'])) {
          $data['oct_techstore_cont_skype'] = html_entity_decode($oct_data['cont_skype'], ENT_QUOTES, 'UTF-8');
        } else {
          $data['oct_techstore_cont_skype'] = false;
        }
        $oct_techstore_cont_clock = $oct_data['cont_clock'];
        if (isset($oct_techstore_cont_clock[$this->session->data['language']]) && !empty($oct_techstore_cont_clock[$this->session->data['language']])) {
          $data['oct_techstore_cont_clock'] = array_values(array_filter(explode(PHP_EOL, $oct_techstore_cont_clock[$this->session->data['language']])));
        } else {
          $data['oct_techstore_cont_clock'] = false;
        }

        $data['ps_additional_icons'] = array();

        if (isset($oct_data['ps_additional_icons']) && $oct_data['ps_additional_icons']) {
          foreach ($oct_data['ps_additional_icons'] as $ps_additional_icon) {
            $data['ps_additional_icons'][] = array(
              'image'      => $this->model_tool_image->resize($ps_additional_icon['image'], 53, 33),
              'sort_order' => ($ps_additional_icon['sort_order']) ? $ps_additional_icon['sort_order'] : 0
            );
          }

          foreach ($data['ps_additional_icons'] as $key => $value) {
            $sort_order[$key] = $value['sort_order'];
          }

          array_multisort($sort_order, SORT_ASC, $data['ps_additional_icons']);
        }
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/product/special.php">
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="before"><![CDATA[
        // oct_techstore start
        if ($result['quantity'] <= 0) {
          $stock = $result['stock_status'];
        } elseif ($this->config->get('config_stock_display')) {
          $stock = $result['quantity'];
        } else {
          $stock = $this->language->get('text_instock');
        }
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        'saving'      => round((($result['price'] - $result['special'])/($result['price'] + 0.01))*100, 0),
        'model'       => $result['model'],
        'stock'       => $stock,
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/product/manufacturer.php">
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="before"><![CDATA[
        // oct_techstore start
        if ($result['quantity'] <= 0) {
          $stock = $result['stock_status'];
        } elseif ($this->config->get('config_stock_display')) {
          $stock = $result['quantity'];
        } else {
          $stock = $this->language->get('text_instock');
        }
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        'saving'      => round((($result['price'] - $result['special'])/($result['price'] + 0.01))*100, 0),
        'model'       => $result['model'],
        'stock'       => $stock,
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/product/search.php">
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="before"><![CDATA[
        // oct_techstore start
        if ($result['quantity'] <= 0) {
          $stock = $result['stock_status'];
        } elseif ($this->config->get('config_stock_display')) {
          $stock = $result['quantity'];
        } else {
          $stock = $this->language->get('text_instock');
        }
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        'saving'      => round((($result['price'] - $result['special'])/($result['price'] + 0.01))*100, 0),
        'model'       => $result['model'],
        'stock'       => $stock,
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/product/product.php">
    <operation error="skip">
      <search><![CDATA[public function index() {]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $data['oct_techstore_data'] = $oct_data = $this->config->get('oct_techstore_data');
        $this->load->language('octemplates/oct_techstore');
        $data['oct_home_text'] = $this->language->get('oct_home_text');
        $data['oct_text_review'] = $this->language->get('oct_text_review');
        $data['tech_pr_micro'] = $oct_data['pr_micro'];
        $data['oct_tech_currency_code_data'] = $this->session->data['currency'];
        $data['text_sku'] = $this->language->get('text_sku');
        $data['text_counter'] = $this->language->get('text_counter');
        $data['text_raiting'] = $this->language->get('text_raiting');
        $data['text_oct_option_disable'] = $this->language->get('oct_option_disable');
        $data['language_code'] = $this->session->data['language'];
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['model'] = $product_info['model'];]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $data['sku'] = $product_info['sku'];
        if ((float)$product_info['special']) {
          $data['economy'] = round((($product_info['price'] - $product_info['special'])/($product_info['price'] + 0.01))*100, 0);
          $saver = round($product_info['price'] - $product_info['special']);
          $data['you_save'] = $this->currency->format($this->tax->calculate($saver, $product_info['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);
          $this->load->model('octemplates/p_special_timer');
          $product_info_special = $this->model_octemplates_p_special_timer->getProduct($product_id);
          if ($product_info_special) {
            $data['special_date_start']= $product_info_special['date_start'];
            $data['special_date_end'] = $product_info_special['date_end'];
          }
        } else {
          $data['economy'] = false;
          $data['you_save'] = false;
          $data['special_date_start'] = false;
          $data['special_date_end'] = false;
        }
        $data['garanted_text'] = array();
        if (isset($oct_data['pr_garantedtext_show']) && $oct_data['pr_garantedtext_show'] == 'on' && isset($oct_data['pr_garantedtext']) && $oct_data['pr_garantedtext']) {
          foreach ($oct_data['pr_garantedtext'] as $key => $pr_garantedtext) {
            if ($pr_garantedtext['popup'] == 'on') {
              $pr_garantedtext_link = (isset($pr_garantedtext['description'][$this->session->data['language']])) ? str_replace('index.php?route=information/information&', 'index.php?route=information/information/agree&', $pr_garantedtext['description'][$this->session->data['language']]['link']) : '';
            } else {
              $pr_garantedtext_link = (isset($pr_garantedtext['description'][$this->session->data['language']])) ? $pr_garantedtext['description'][$this->session->data['language']]['link'] : '';
            }
            $data['garanted_text'][] = array(
              'id'    => $key,
              'icon'  => $pr_garantedtext['icon'],
              'popup' => $pr_garantedtext['popup'],
              'name'  => (isset($pr_garantedtext['description'][$this->session->data['language']])) ? $pr_garantedtext['description'][$this->session->data['language']]['name'] : '',
              'link'  => ($pr_garantedtext_link == "#" || empty($pr_garantedtext_link)) ? "javascript:void(0);" : $pr_garantedtext_link
            );
          }
        }
        $data['oct_pr_additional_tab'] = array();
        if (isset($oct_data['pr_additional_tab_show']) && $oct_data['pr_additional_tab_show'] == 'on') {
          if (isset($oct_data['pr_additional_tab_heading'][$this->session->data['language']]) && !empty($oct_data['pr_additional_tab_heading'][$this->session->data['language']])) {
            $oct_pr_additional_tab_heading = html_entity_decode($oct_data['pr_additional_tab_heading'][$this->session->data['language']], ENT_QUOTES, 'UTF-8');
          } else {
            $oct_pr_additional_tab_heading = '';
          }
          if (isset($oct_data['pr_additional_tab_text'][$this->session->data['language']]) && !empty($oct_data['pr_additional_tab_text'][$this->session->data['language']])) {
            $oct_pr_additional_tab_text = html_entity_decode($oct_data['pr_additional_tab_text'][$this->session->data['language']], ENT_QUOTES, 'UTF-8');
          } else {
            $oct_pr_additional_tab_text = '';
          }
          if ($oct_pr_additional_tab_heading && $oct_pr_additional_tab_text) {
            $data['oct_pr_additional_tab'] = array(
              'heading' => $oct_pr_additional_tab_heading,
              'text'    => $oct_pr_additional_tab_text
            );
          }
        }
        $data['oct_techstore_pr_social_button_script'] = html_entity_decode($oct_data['pr_social_button_script'], ENT_QUOTES, 'UTF-8');
        if (isset($oct_data['terms']) && $oct_data['terms']) {
          $this->load->model('catalog/information');
          $information_info = $this->model_catalog_information->getInformation($oct_data['terms']);
          if ($information_info) {
            $data['text_terms'] = sprintf($this->language->get('text_oct_terms'), $this->url->link('information/information', 'information_id=' . $oct_data['terms'], 'SSL'), $information_info['title'], $information_info['title']);
          } else {
            $data['text_terms'] = '';
          }
        } else {
          $data['text_terms'] = '';
        }
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[if (empty($this->request->post['rating']) || $this->request->post['rating'] < 0 || $this->request->post['rating'] > 5) {]]></search>
      <add position="before"><![CDATA[
        $oct_data = $this->config->get('oct_techstore_data');
        if (isset($oct_data['terms']) && $oct_data['terms']) {
          if (!isset($this->request->post['terms'])) {
            $this->load->model('catalog/information');
            $information_info = $this->model_catalog_information->getInformation($oct_data['terms']);
            $json['error'] = sprintf($this->language->get('error_oct_terms'), $information_info['title']);
          }
        }
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/en-gb/product/product.php">
    <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
      $_['text_sku']    = 'SKU:';
      $_['text_raiting'] = 'Rating:';
      $_['oct_option_disable'] = 'Ended';
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/uk-ua/product/product.php">
    <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
      $_['text_sku']    = 'Артикул:';
      $_['text_raiting'] = 'Рейтинг:';
      $_['oct_option_disable'] = 'Закінчився';
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/product/category.php">
    <operation error="skip">
      <search><![CDATA[public function index() {]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $data['oct_techstore_data'] = $this->config->get('oct_techstore_data');
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['button_grid'] = $this->language->get('button_grid');]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $data['text_model'] = $this->language->get('text_model');
        $data['text_stock'] = $this->language->get('text_stock');
        $this->load->language('octemplates/oct_techstore');
        $data['oct_home_text'] = $this->language->get('oct_home_text');
        $data['text_model'] = $this->language->get('text_model');
        $data['text_stock'] = $this->language->get('text_stock');
        $data['text_instock'] = $this->language->get('text_instock');
        $data['oct_choose_subcategory'] = $this->language->get('oct_choose_subcategory');
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['categories'][] = array(]]></search>
      <add position="before"><![CDATA[
        // oct_techstore start
        if (isset($result['image']) && $result['image'] !="") {
          $cat_image = $this->model_tool_image->resize($result['image'], 100, 100);
        } else {
          $cat_image = $this->model_tool_image->resize("no-thumb.png", 100, 100);
        }
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['categories'][] = array(]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        'thumb' => $cat_image,
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="before"><![CDATA[
        // oct_techstore start
        if ($result['quantity'] <= 0) {
          $stock = $result['stock_status'];
        } elseif ($this->config->get('config_stock_display')) {
          $stock = $result['quantity'];
        } else {
          $stock = $this->language->get('text_instock');
        }
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['products'][] = array(]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        'saving'      => round((($result['price'] - $result['special'])/($result['price'] + 0.01))*100, 0),
        'model'       => $result['model'],
        'stock'       => $stock,
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
    <file path="catalog/controller/common/cart.php">
    <operation error="skip">
      <search><![CDATA[$data['text_empty'] = $this->language->get('text_empty');]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $data['text_cart_heading'] = $this->language->get('text_cart_heading');
        // oct_techstore end
      ]]></add>
    </operation>
    <operation error="skip">
      <search><![CDATA[$data['text_items'] = sprintf($this->language->get('text_items'), $this->cart->countProducts() + (isset($this->session->data['vouchers']) ? count($this->session->data['vouchers']) : 0), $this->currency->format($total, $this->session->data['currency']));]]></search>
      <add position="replace"><![CDATA[
        // oct_techstore start
        $data['text_items'] = sprintf($this->language->get('text_cart_items'), $this->currency->format($total, $this->session->data['currency']), $this->cart->countProducts() + (isset($this->session->data['vouchers']) ? count($this->session->data['vouchers']) : 0));
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/checkout/cart.php">
    <operation error="skip">
      <search><![CDATA[$json['total'] = sprintf($this->language->get('text_items'), $this->cart->countProducts() + (isset($this->session->data['vouchers']) ? count($this->session->data['vouchers']) : 0), $this->currency->format($total, $this->session->data['currency']));]]></search>
      <add position="replace"><![CDATA[
        // oct_techstore start
        $json['total'] = sprintf($this->language->get('text_cart_items'), $this->currency->format($total, $this->session->data['currency']), $this->cart->countProducts() + (isset($this->session->data['vouchers']) ? count($this->session->data['vouchers']) : 0));
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/en-gb/common/cart.php">
     <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $_['text_cart_heading'] = 'Cart:';
        $_['text_cart_items']     = '<span class="cart-total-price">%s</span> <i class="fa fa-shopping-cart"><span class="count-quantity">%s</span></i>';
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/ru-ru/common/cart.php">
     <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $_['text_cart_heading'] = 'Корзина:';
        $_['text_cart_items']     = '<span class="cart-total-price">%s</span> <i class="fa fa-shopping-cart"><span class="count-quantity">%s</span></i>';
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/uk-ua/common/cart.php">
    <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $_['text_cart_heading'] = 'Кошик:';
        $_['text_cart_items']     = '<span class="cart-total-price">%s</span> <i class="fa fa-shopping-cart"><span class="count-quantity">%s</span></i>';
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/en-gb/checkout/cart.php">
    <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $_['text_cart_items']     = '<span class="cart-total-price">%s</span> <i class="fa fa-shopping-cart"><span class="count-quantity">%s</span></i>';
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/ru-ru/checkout/cart.php">
    <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $_['text_cart_items']     = '<span class="cart-total-price">%s</span> <i class="fa fa-shopping-cart"><span class="count-quantity">%s</span></i>';
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/uk-ua/checkout/cart.php">
    <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
        // oct_techstore start
        $_['text_cart_items']     = '<span class="cart-total-price">%s</span> <i class="fa fa-shopping-cart"><span class="count-quantity">%s</span></i>';
        // oct_techstore end
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/en-gb/en-gb.php">
    <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
        $_['text_oct_terms']  = 'I have read <a href="%s" target="_blank"><b>%s</b></a> and agree with conditions';
        $_['error_oct_terms'] = 'You have to read and will agree with %s!';
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/ru-ru/ru-ru.php">
    <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
        $_['text_oct_terms']  = 'Я прочитал <a href="%s" target="_blank"><b>%s</b></a> и согласен с условиями';
        $_['error_oct_terms'] = 'Вы должны прочитать и согласиться с %s!';
      ]]></add>
    </operation>
  </file>
  <file path="catalog/language/uk-ua/uk-ua.php">
    <operation error="skip">
      <search><![CDATA[<?php]]></search>
      <add position="after"><![CDATA[
        $_['text_oct_terms']  = 'Я прочитав <a href="%s" target="_blank"><b>%s</b></a> і згоден з вимогами';
        $_['error_oct_terms'] = 'Ви повинні прочитати і погодитися з %s!';
      ]]></add>
    </operation>
  </file>
  <file path="catalog/controller/information/information.php">
        <operation error="skip">
            <search><![CDATA[$data['description'] = html_entity_decode($information_info['description'], ENT_QUOTES, 'UTF-8');]]></search>
            <add position="replace"><![CDATA[
       $data['description'] = str_replace("<img", "<img class=\"img-responsive\"",  html_entity_decode($information_info['description'], ENT_QUOTES, 'UTF-8'));
      ]]></add>
        </operation>
    </file>
    <file path="catalog/controller/product/category.php">
        <operation error="skip">
            <search><![CDATA[$data['description'] = html_entity_decode($category_info['description'], ENT_QUOTES, 'UTF-8');]]></search>
            <add position="replace"><![CDATA[
       $data['description'] = str_replace("<img", "<img class=\"img-responsive\"",  html_entity_decode($category_info['description'], ENT_QUOTES, 'UTF-8'));
      ]]></add>
        </operation>
    </file>
    <file path="catalog/controller/product/product.php">
        <operation error="skip">
            <search><![CDATA[$data['description'] = html_entity_decode($product_info['description'], ENT_QUOTES, 'UTF-8');]]></search>
            <add position="replace"><![CDATA[
       $data['description'] = str_replace("<img", "<img class=\"img-responsive\"",  html_entity_decode($product_info['description'], ENT_QUOTES, 'UTF-8'));
      ]]></add>
        </operation>
    </file>
</modification>
